!function(i,t,e,n,s){"use strict";s.ArticleCollectionView=n.View.extend({defaults:{container:"#content"},initialize:function(){var n=this;this.options=e.extend({},this.defaults,this.options),this.shard_cycle=new i.Cycle(["",1,2,3,4]),this.collection=new this.options.Collection,this.collection.on("reset",this.add_shard_values,this).on("reset",this.render_all,this).fetch(),this.container=this.options.container,this.inicial_content=t(this.container).html(),t.ajax({dataType:"json",url:i.set_path("applications/image_settings.json"),success:function(i){n.settings=t.extend({},i.defaults,i.cover_image),n.initialize_events()}})},initialize_events:function(){var n=this,a=1;for(this.breakpoints=new i.Breakpoints(this.settings),this.max_size=[],a;a<=this.breakpoints.size;a++)this.max_size.push(a);t(s).on("resize",function(){var t=new i.Breakpoints(n.settings);t.width!==n.breakpoints.width&&(t.size>n.breakpoints.size&&-1===e.indexOf(n.max_size,t.size)&&(n.max_size.push(t.size),n.render_all()),n.fix_sizes(t),n.breakpoints=t)})},fix_sizes:function(i){var e=i.width+"px";t("article > figure > img").css({"max-width":e}),t("article").css({"max-width":e})},add_shard_values:function(){var i=this;this.collection.each(function(t){t.set({shard:i.shard_cycle.__next__()})},this)},render_one:function(e){var n=new i.Breakpoints(this.settings),s=t(this.container);e.set({quality:n.settings.quality,width:n.width});var a=new this.options.ModelView({model:e});""===s.html()?s.append(a.render().el):s.append(a.render().el).append(" "),this.fix_sizes(n)},render_all:function(){t(this.container).html(""),"undefined"!=typeof this.inicial_content&&t(this.container).append(this.inicial_content),this.collection.each(this.render_one,this)}})}(helpers,jQuery,_,Backbone,window);