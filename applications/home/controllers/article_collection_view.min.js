!function(i,t,e,s,n){"use strict";n.ArticleCollectionView=s.View.extend({defaults:{container:"#content"},initialize:function(){var s=this;this.options=e.extend({},this.defaults,this.options),this.shard_cycle=new i.Cycle(["",1,2,3,4]),this.collection=new this.options.Collection,this.collection.on("reset",this.add_shard_values,this).on("reset",this.render_all,this).fetch(),this.container=this.options.container,this.inicial_content=t(this.container).html(),t.ajax({dataType:"json",url:i.set_path("applications/image_settings.json"),success:function(i){s.settings=t.extend({},i.defaults,i.cover_image),s.initialize_events()}})},initialize_events:function(){var e=1;for(this.breakpoints=new i.Breakpoints(this.settings),this.max_size=[],e;e<=this.breakpoints.size;e++)this.max_size.push(e);t(n).on("resize",this.check_dimensions)},fix_sizes:function(i){var e=i.width+"px";t("article > figure > img").css({"max-width":e}),t("article").css({"max-width":e})},check_dimensions:function(){var t=new i.Breakpoints(this.settings);t.width!==this.breakpoints.width&&(t.size>this.breakpoints.size&&-1===e.indexOf(this.max_size,t.size)&&(this.max_size.push(t.size),this.render_all()),this.fix_sizes(t),this.breakpoints=t)},add_shard_values:function(){var i=this;this.collection.each(function(t){t.set({shard:i.shard_cycle.__next__()})},this)},render_one:function(e){var s=new i.Breakpoints(this.settings),n=t(this.container);e.set({quality:s.settings.quality,width:s.width});var a=new this.options.ModelView({model:e});""===n.html()?n.append(a.render().el):n.append(a.render().el).append(" "),this.fix_sizes(s)},render_all:function(){t(this.container).html(""),"undefined"!=typeof this.inicial_content&&t(this.container).append(this.inicial_content),this.collection.each(this.render_one,this)}})}(helpers,jQuery,_,Backbone,window);