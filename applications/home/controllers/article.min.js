!function(e,i,t,a,n,o){"use strict";function l(){s.$container.fadeOut(function(){s.$image.attr("src",""),s.$spinner.css("display","block"),s.$item_wrapper.css("visibility","hidden")})}var s=o.main||{};s.$image=i("#zoom-in-image"),s.$wrapper=i("#zoom-in-container"),s.$container=i("#full-size-box"),s.$spinner=i("#zoom-spinner"),s.$item_wrapper=i("#item-wrapper figure"),s.ImageModel=a.Model.extend({defaults:{id:"",url:"",article_name:"",description:"",completed:!1,quality:"",width:"",height:"",shard:"",vid:""}}),s.ImageCollection=a.Collection.extend({url:e.set_path("images/"+e.get_article_name("/proyectos/")),model:s.ImageModel}),s.ImageModelView=a.View.extend({tagName:"article",className:"image_item",_set_template:function(){var e=this.model.get("type");"image_file"===e?(this.templateId="#image_file_template",this.className=".image_file_container"):"image_link"===e?(this.templateId="#image_link_template",this.className=".image_link_container"):"video_link"===e?(this.templateId="#video_link_template",this.className=".video_link_container"):(this.templateId="#image_link_template",this.className=".image_link_container"),this.template=t.template(i(this.templateId).html())},initialize:function(){this._set_template()},render:function(){this.model.get("description")?this.$el.html(this.template(this.model.toJSON())):this.$el.html("");this.$el.find("img"),this.$el.find(".article_item_container figure");return this},events:{"click img":"zoom_out_image"},fix_image_size:function(e,t,a){function n(){var i,n;e.css({"max-width":a.outerWidth(),"max-height":a.outerHeight(),height:"auto",width:"auto"}),e.outerHeight()<a.outerHeight()?(i=a.outerHeight()-e.outerHeight(),n=String(Math.round(i/2))+"px"):n="0px",t.css({top:n})}e.sizeloaded().on("sizeloaded",n),i(o).on("resize",n)},zoom_out_image:function(){var e="http://src.sencha.io/jpg90/1920/1080/"+this.model.get("url");s.$image.attr("src",e).sizeloaded().on("sizeloaded",function(){s.$spinner.fadeOut("slow"),s.$item_wrapper.css({opacity:0,visibility:"visible"}).animate({opacity:1},"slow")}),this.fix_image_size(s.$image,s.$wrapper,s.$container),s.$container.fadeIn()}}),i(o).on("keydown",l),i("#full-size-box").on("click",l),"undefined"==typeof jasmine&&i(function(){s.image_collection_view=new n({Collection:s.ImageCollection,ModelView:s.ImageModelView})}),o.main=s}(helpers,jQuery,_,Backbone,ArticleCollectionView,window);