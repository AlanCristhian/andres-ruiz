!function(e,i,t,n,o,a){"use strict";var r=a.main||{};r.get_article_name=function(e){var e=e||a.location.pathname;return e=e.replace("/proyectos/",""),e=e.replace("~andresru",""),"/"===e[0]&&(e=e.substr(1)),e},r.$image=i("#zoom-in-image"),r.$wrapper=i("#zoom-in-container"),r.$container=i("#full-size-box"),r.$spinner=i("#zoom-spinner"),r.$item_wrapper=i("#item-wrapper figure"),r.ImageModel=n.Model.extend({defaults:{id:null,url:"",article_name:"",description:"",completed:!1,quality:null,width:null,shard:null}}),r.ImageCollection=n.Collection.extend({url:e.set_path("images/"+r.get_article_name()),model:r.ImageModel}),r.ImageModelView=n.View.extend({tagName:"article",className:"image_item",template:t.template(i("#imageTemplate").html()),render:function(){function e(){n.fadeOut("slow"),t.css({opacity:0,visibility:"visible"}).animate({opacity:1},"slow")}this.$el.html(this.template(this.model.toJSON()));var i=this.$el.find("img"),t=this.$el.find(".article_item_container figure"),n=this.$el.find(".spinner");return i.resizeone(e),this},events:{"click .icon-resize-full":"zoom_out_image"},fix_image_size:function(e,t,n){function o(){var i,o;e.css({"max-width":n.outerWidth(),"max-height":n.outerHeight(),height:"auto",width:"auto"}),e.outerHeight()<n.outerHeight()?(i=n.outerHeight()-e.outerHeight(),o=String(Math.round(i/2))+"px"):o="0px",t.css({top:o})}e.on("load error",o),i(a).on("resize",o)},zoom_out_image:function(){var i=this.model.get("url"),t="http://src.sencha.io/jpg90/720/"+e._PROTOCOL+"//"+e._HOSTNAME+e.set_path(i);r.$image.attr("src",t),r.$wrapper.resizeone(function(){r.$spinner.fadeOut("slow"),r.$item_wrapper.css({opacity:0,visibility:"visible"}).animate({opacity:1},"slow")}),this.fix_image_size(r.$image,r.$wrapper,r.$container),r.$container.fadeIn()}}),i(".icon-resize-small").on("click",function(){r.$container.fadeOut(function(){r.$image.attr("src",""),r.$spinner.css("display","block"),r.$item_wrapper.css("visibility","hidden")})}),"undefined"==typeof __testmode__&&i(function(){r.image_collection_view=new o({Collection:r.ImageCollection,ModelView:r.ImageModelView})}),a.main=r}(helpers,jQuery,_,Backbone,ArticleCollectionView,window);