!function(t,i,e,a){"use strict";var s=a.main||{};s.ArticleDataModel=t.Model.extend({url:e.set_path("/admin/get-article-data")}),s.ArticleDataView=t.View.extend({tagName:"article",id:"article_data_container",template:i.template($("#article_data_template").html()),defaults:{Model:s.ArticleDataModel},initialize:function(){var t=this;this.options=i.extend({},this.defaults,this.options),this.settings_deferred=$.getJSON(e.set_path("applications/image_settings.json")),this.settings_deferred.done(function(i){t.settings=$.extend({},i.defaults,i.edit_image)}),this.model=new this.options.Model,this.model.on("change",function(){t.settings_deferred.done(function(){t.render()})},this),this.fetch_deferred=this.model.fetch({data:{edit_url:a.location.pathname,data_group:"info"}}),this.$el.appendTo("#content").after(" ")},render:function(){this.$el.html(this.template(this.model.toJSON()));var t=new e.Breakpoints(this.settings);return this.$el.css({width:t.width+"px"}),this.$input_text=this.$el.find('input[type="text"]'),this.$classification=this.$el.find("#classification"),this.$country=this.$el.find("#country"),this.$state=this.$el.find("#state"),this.$city=this.$el.find("#city"),this.$autor=this.$el.find("#autor"),this.$colaborators=this.$el.find("#colaborators"),this.$project_date=this.$el.find("#project_date"),this.$edit_buttons=this.$el.find("#save_article_data, #cancel_article_data"),this.$edit_article_data=this.$el.find("#edit_article_data"),this.$article_data_status=this.$el.find(".article_data_status"),this.$article_status_done=this.$el.find(".article_data_done"),this.$article_status_error=this.$el.find(".article_data_error"),this.$article_status_uploading=this.$el.find(".article_data_uploading"),this},events:{"click #edit_article_data":"show_info_and_buttons","click #cancel_article_data":"hide_info_and_buttons","click #save_article_data":"save_info_fields"},show_info_and_buttons:function(){this.$article_data_status.css("display","none"),this.$edit_buttons.css("display","inline"),this.$input_text.prop("readonly",!1).css({"background-color":"white",border:".1em solid lightgray"}),this.$edit_article_data.css("display","none")},hide_info_and_buttons:function(){this.$article_data_status.css("display","none"),this.$edit_buttons.css("display","none"),this.$input_text.prop("readonly",!0).css({"background-color":"transparent",border:"1px solid transparent"}),this.$edit_article_data.css("display","inline")},save_info_fields:function(){var t,i=this;this.$article_data_status.css("display","none"),this.$article_status_uploading.css("display","inline-block"),this.model.set({classification:this.$classification.val(),country:this.$country.val(),state:this.$state.val(),city:this.$city.val(),autor:this.$autor.val(),colaborators:this.$colaborators.val(),project_date:this.$project_date.val()}),t=$.post(e.set_path("/admin/save-article-data"),this.model.toJSON()),t.done(function(){i.hide_info_and_buttons(),i.$article_status_done.css("display","inline-block")}).fail(function(){i.hide_info_and_buttons(),i.$article_status_error.css("display","inline-block")})}}),"undefined"==typeof jasmine&&$(function(){s.article_data_view=new s.ArticleDataView}),a.main=s}(Backbone,_,helpers,window);